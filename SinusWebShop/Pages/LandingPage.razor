@page "/"
@inject NavigationManager NavigationManager
@inject HttpClient httpClient
@using SinusWebShop.Models
@using SinusWebShop.Api

<h1>Welcome to our Webshop!</h1>

<p>Explore our latest products and offers below</p>

@if (Categories != null && Categories.Any())
{
    <div class="main-categories">
        @foreach (var category in Categories)
        {
            <div class="category">
                <h2>@category</h2>
                <button class="explore-button" @onclick="() => NavigateToCategory(category)">Explore Products</button>
            </div>
        }
    </div>
}

@code {
    public List<string> Categories { get; set; }
    public string ErrorMessage { get; set; }

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Root result = await new ApiCaller().GetProductData("products");
            Categories = result.Products.Select(p => p.Category).Distinct().ToList();
        }
        catch (Exception ex)
        {
            ErrorMessage = ex.Message;
        }
    }

    private void NavigateToCategory(string categoryName)
    {
        NavigationManager.NavigateTo($"/category/{categoryName}");
    }
}

<style>
    body {
        background-color: grey; 
        color: black; 
        

    }

    h1, h2, p {
        text-align: center;
        font-family: Verdana, Geneva, Tahoma, sans-serif
        
    }

    .main-categories {
        display: flex;
        flex-direction: column; 
        align-items: center; 
        margin-top: 20px;
    }


    .category {
        background-color: darkgray; 
        border: 1px solid #000000; 
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin: 10px;
        text-align: center;
        width: 500px; 
    }

        .category h2 {
            margin-bottom: 10px; 
            text-transform: capitalize; 
        }


    .explore-button {
        background-color: transparent; 
        border: 1px solid black;
        color: black; 
        border-radius: 4px;
        padding: 10px 20px;
        margin-top: 10px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

        .explore-button:hover {
            background-color: darkblue;
            color: #ffffff; 
        }


    
    .category:hover {
        background-color: lightgray; 
        transform: translateY(-5px); 
        transition: background-color 0.3s ease, transform 0.3s ease; 
    }

</style>
