@page "/"
@inject NavigationManager NavigationManager
@inject HttpClient httpClient
@using SinusWebShop.Models
@using SinusWebShop.Api

<h1>Välkommen till vår Webshop!</h1>

<p>Utforska våra senaste produkter och erbjudanden nedan.</p>

@if (Categories != null && Categories.Any())
{
    <div class="main-categories">
        @foreach (var category in Categories)
        {
            <div class="category">
                <h2>@category</h2>
                <button class="explore-button" @onclick="() => NavigateToCategory(category)">Explore Products</button>
            </div>
        }
    </div>
}

@code {
    public List<string> Categories { get; set; }
    public string ErrorMessage { get; set; }

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Root result = await new ApiCaller().GetProductData("products");
            Categories = result.Products.Select(p => p.Category).Distinct().ToList();
        }
        catch (Exception ex)
        {
            ErrorMessage = ex.Message;
        }
    }

    private void NavigateToCategory(string categoryName)
    {
        NavigationManager.NavigateTo($"/category/{categoryName}");
    }
}

<style>
    .main-categories {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        margin-top: 20px;
    }

    .category {
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        margin: 10px;
        text-align: center;
        width: 200px;
    }

    .explore-button {
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 10px 20px;
        margin-top: 10px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

        .explore-button:hover {
            background-color: #0056b3;
        }

</style>